from django.db import migrations


def populate_places(apps, schema_editor):
    Place = apps.get_model('tourism', 'Place')
    City = apps.get_model('tourism', 'City')
    Category = apps.get_model('tourism', 'Category')
    fallback_city = City.objects.filter(name='تهران').first() or City.objects.order_by('city_id').first()
    fallback_category = Category.objects.filter(name='تاریخی').first() or Category.objects.order_by('category_id').first()

    def create_place(title, city_name, cat_name, lat, lon):
        title = title.replace("_", " ")

        city = City.objects.filter(name=city_name).first() if city_name else fallback_city
        category = Category.objects.filter(name=cat_name).first() if cat_name else fallback_category

        if city is None:
            return

        if not Place.objects.filter(title=title, city=city).exists():
            Place.objects.create(
                title=title,
                description=f"{title} is one of Iran's tourist attractions.",
                city=city,
                category=category,
                latitude=lat,
                longitude=lon,
            )

    # Data List: (Title, City Name, Category Name, Latitude, Longitude)
# Data List: (Title, City Name, Category Name, Latitude, Longitude)
    places_data = [
        ('تخت_جمشید', 'مرودشت', 'تاریخی', 29.9357, 52.8914),
        ('میدان_نقش_جهان', 'اصفهان', 'تاریخی', 32.6577, 51.6776),
        ('کاخ_گلستان', 'تهران', 'تاریخی', 35.6797, 51.4204),
        ('برج_میلاد', 'تهران', 'مدرن', 35.7448, 51.3753),
        ('بازار_بزرگ_اصفهان', 'اصفهان', 'بازار', 32.6624, 51.6776),
        ('مسجد_جامع_اصفهان', 'اصفهان', 'مذهبی', 32.6697, 51.6853),
        ('مسجد_شیخ_لطف‌الله', 'اصفهان', 'مذهبی', 32.6574, 51.6787),
        ('سی‌_و_سه_پل', 'اصفهان', 'تاریخی', 32.6445, 51.6675),
        ('پل_خواجو', 'اصفهان', 'تاریخی', 32.6369, 51.6834),
        ('ارگ_بم', 'بم', 'تاریخی', 29.1161, 58.3694),
        ('باغ_شاهزاده_ماهان', 'ماهان', 'باغ تاریخی', 30.0406, 57.2808),
        ('باغ_دولت‌آباد', 'یزد', 'باغ تاریخی', 31.9022, 54.3529),
        ('باغ_فتح‌آباد', 'کرمان', 'باغ تاریخی', 30.1614, 56.9317),
        ('حرم_حضرت_معصومه', 'قم', 'مذهبی', 34.6418, 50.8790),
        ('بازار_تبریز', 'تبریز', 'بازار', 38.0817, 46.2929),
        ('کاخ_چهلستون', 'اصفهان', 'تاریخی', 32.6572, 51.6719),
        ('عمارت_عالی‌قاپو', 'اصفهان', 'تاریخی', 32.6576, 51.6766),
        ('آرامگاه_فردوسی', 'طوس', 'فرهنگی', 36.4834, 59.5312),
        ('آرامگاه_خیام_نیشابور', 'نیشابور', 'فرهنگی', 36.2024, 58.8202),
        ('گنبد_سلطانیه', 'سلطانیه', 'تاریخی', 36.4338, 48.7963),
        ('تخت_سلیمان', 'تکاب', 'تاریخی', 36.6033, 47.2366),
        ('طاق_بستان', 'کرمانشاه', 'تاریخی', 34.3887, 47.1306),
        ('مجموعه_بیستون', 'بیستون', 'تاریخی', 34.3968, 47.4370),
        ('قره_کلیسا', 'چالدران', 'مذهبی', 39.0947, 44.5422),
        ('کلیسای_وانک', 'اصفهان', 'مذهبی', 32.6353, 51.6558),
        ('آتشکده_زرتشتیان_یزد', 'یزد', 'مذهبی', 31.8806, 54.3732),
        ('روستای_ماسوله', 'فومن', 'طبیعت‌گردی', 37.1517, 48.9912),
        ('روستای_صخره‌ای_میمند', 'شهربابک', 'روستای تاریخی', 30.2173, 55.3700),
        ('قلعه_فلک‌الافلاک', 'خرم‌آباد', 'تاریخی', 33.4834, 48.3551),
        ('قلعه_الموت', 'قزوین', 'تاریخی', 36.4469, 50.5872),
        ('قلعه_رودخان', 'فومن', 'تاریخی', 37.1124, 49.2403),
        ('غار_علی_صدر', 'همدان', 'طبیعت‌گردی', 35.3023, 48.3045),
        ('برج_گنبد_کاووس', 'گنبد کاووس', 'تاریخی', 37.2583, 55.1698),
        ('تالاب_انزلی', 'بندر انزلی', 'طبیعت‌گردی', 37.4727, 49.4627),
        ('کویر_لوت_شهداد', 'شهداد', 'طبیعت‌گردی', 30.4206, 57.7027),
        ('جزیره_کیش', 'کیش', 'تفریحی', 26.5333, 53.9714),
        ('ژئوپارک_قشم', 'قشم', 'طبیعت‌گردی', 26.7516, 55.8239),
        ('دره_ستارگان', 'قشم', 'طبیعت‌گردی', 26.8528, 56.0526),
        ('دره_تندیس‌ها_قشم', 'قشم', 'طبیعت‌گردی', 26.6970, 55.6171),
        ('بازار_قیصریه', 'اصفهان', 'بازار', 32.6608, 51.6775),
        ('آرامگاه_عطار_نیشابور', 'نیشابور', 'فرهنگی', 36.2020, 58.8188),
        ('آرامگاه_شیخ_صفی‌الدین_اردبیلی', 'اردبیل', 'تاریخی', 38.2482, 48.2917),
        ('کاخ_سعدآباد', 'تهران', 'تاریخی', 35.8166, 51.4233),
        ('کاخ_نیاوران', 'تهران', 'تاریخی', 35.8115, 51.4725),
        ('بازار_رضای_مشهد', 'مشهد', 'بازار', 36.2847, 59.6166),
        ('مسجد_جامع_یزد', 'یزد', 'مذهبی', 31.9011, 54.3707),
        ('منارجنبان', 'اصفهان', 'تاریخی', 32.6514, 51.5833),
        ('مسجد_جمکران', 'قم', 'مذهبی', 34.5824, 50.9126),
        ('زیگورات_چغازنبیل', 'شوش', 'تاریخی', 32.0084, 48.5211),
        ('شهر_سوخته_زابل', 'زابل', 'تاریخی', 30.6015, 61.3323),
        ('محوطه_باستانی_شوش', 'شوش', 'تاریخی', 32.1895, 48.2443),
        ('کاخ_آپادانا_شوش', 'شوش', 'تاریخی', 32.1915, 48.2435),
        ('آرامگاه_باباطاهر_عریان', 'همدان', 'فرهنگی', 34.8052, 48.5028),
        ('آرامگاه_ابوعلی_سینا', 'همدان', 'فرهنگی', 34.7909, 48.5132),
        ('بام_تهران', 'تهران', 'تفریحی', 35.8239, 51.4086),
        ('دربند', 'تهران', 'تفریحی', 35.8306, 51.4244),
        ('توچال', 'تهران', 'تفریحی', 35.8225, 51.4169),
        ('پارک_چیتگر', 'تهران', 'طبیعت‌گردی', 35.7265, 51.2223),
        ('پل_طبیعت', 'تهران', 'مدرن', 35.7533, 51.4194),
        ('کتیبه_بیستون', 'بیستون', 'تاریخی', 34.3968, 47.4370),
        ('سازه‌های_آبی_شوشتر', 'شوشتر', 'تاریخی', 32.0435, 48.8524),
        ('تالاب_میانکاله', 'بهشهر', 'طبیعت‌گردی', 36.8373, 53.4154),
        ('دریاچه_زریوار', 'مریوان', 'طبیعت‌گردی', 35.5385, 46.1246),
        ('دریاچه_چیتگر', 'تهران', 'تفریحی', 35.7460, 51.2117),
        ('آرامگاه_شمس_تبریزی', 'خوی', 'فرهنگی', 38.5574, 44.9602),
        ('آرامگاه_نادرشاه_افشار', 'مشهد', 'تاریخی', 36.2952, 59.6053),
        ('قلعه_دختر_ساوه', 'ساوه', 'تاریخی', 35.0000, 50.3000),
        ('بازار_سنتی_رشت', 'رشت', 'بازار', 37.2797, 49.5878),
        ('بازار_سنتی_کرمانشاه', 'کرمانشاه', 'بازار', 34.3164, 47.0683),
        ('بازار_سنتی_همدان', 'همدان', 'بازار', 34.7960, 48.5140),
        ('مسجد_جامع_کرمان', 'کرمان', 'مذهبی', 30.2858, 57.0788),
        ('حمام_گنجعلی‌خان', 'کرمان', 'تاریخی', 30.2917, 57.0808),
        ('مجموعه_گنجعلی‌خان', 'کرمان', 'تاریخی', 30.2916, 57.0805),
        ('جنگل_حرای_قشم', 'قشم', 'طبیعت‌گردی', 26.8364, 55.7099),
        ('روستای_لافت', 'قشم', 'روستای تاریخی', 26.9015, 55.7645),
        ('آبشار_شوی_دزفول', 'دزفول', 'طبیعت‌گردی', 32.7842, 48.8078),
        ('دریاچه_نئور', 'اردبیل', 'طبیعت‌گردی', 37.9961, 48.5636),
        ('دریاچه_ولشت', 'کلاردشت', 'طبیعت‌گردی', 36.5375, 51.2914),
        ('کلات_نادری', 'کلات', 'تاریخی', 36.9961, 59.7656),
        ('تپه_هگمتانه', 'همدان', 'تاریخی', 34.8072, 48.5206),
        ('غار_قوری_قلعه', 'روانسر', 'طبیعت‌گردی', 34.8967, 46.6083),
        ('غار_کرفتو', 'دیواندره', 'تاریخی', 36.2650, 46.8617),
        ('قلعه_بیرجند', 'بیرجند', 'تاریخی', 32.8858, 59.2144),
        ('عمارت_کلاه_فرنگی_بیرجند', 'بیرجند', 'تاریخی', 32.8712, 59.2201),
        ('آسیاب_آبی_اشکذر', 'اشکذر', 'تاریخی', 31.9982, 54.2057),
        ('یخچال_خشتی_میبد', 'میبد', 'تاریخی', 32.2325, 54.0150),
        ('کاروانسرای_سعدالسلطنه', 'قزوین', 'تاریخی', 36.2683, 50.0019),
        ('باغ_اکبرآباد_بیرجند', 'بیرجند', 'باغ تاریخی', 32.8525, 59.2272),
        ('روستای_ماخونیک', 'سربیشه', 'روستای تاریخی', 32.4552, 60.4079),
        ('روستای_کندلوس', 'نوشهر', 'روستای تاریخی', 36.3897, 51.4983),
        ('روستای_فیلبند', 'بابل', 'طبیعت‌گردی', 36.1738, 52.5113),
        ('آبشار_کبودوال', 'علی‌آباد کتول', 'طبیعت‌گردی', 36.8731, 54.8931),
        ('دهکده_گردشگری_گنجنامه', 'همدان', 'تفریحی', 34.7644, 48.4358),
        ('طاق_گرا', 'سرپل ذهاب', 'تاریخی', 34.3728, 46.0239),
        ('قنات_قصبه_گناباد', 'گناباد', 'تاریخی', 34.3547, 58.6833),
        ('قنات_زارچ', 'یزد', 'تاریخی', 31.9567, 54.2831),
        ('مسجد_کبود', 'تبریز', 'تاریخی', 38.0739, 46.3022),
        ('عمارت_شهرداری_قزوین', 'قزوین', 'تاریخی', 36.2694, 50.0042),
        ('آتشکده_زرتشتیان_کرمان', 'کرمان', 'مذهبی', 30.2942, 57.0864),
        ('آتشکده_کرکویه', 'زابل', 'تاریخی', 31.0500, 61.5500),
        ('بازار_بزرگ_کرمان', 'کرمان', 'بازار', 30.2911, 57.0800),
        ('پارک_ملی_گلستان', 'گلستان', 'طبیعت‌گردی', 37.3800, 55.9500),
        ('جزیره_هنگام', 'هنگام', 'طبیعت‌گردی', 26.6500, 55.8700),
        ('جزیره_لارک', 'لارک', 'طبیعت‌گردی', 26.8500, 56.3500),
        ('بندر_سیراف', 'بوشهر', 'تاریخی', 27.6653, 52.3456),
        ('تنگه_شیرز', 'کوهدشت', 'طبیعت‌گردی', 33.6067, 47.5028),
        ('کلوت_شهداد', 'کرمان', 'طبیعت‌گردی', 30.6000, 57.8000),
        ('روستای_پاقلعه_بجنورد', 'بجنورد', 'روستای تاریخی', 37.4083, 57.3000),
        ('روستای_سر_آقا_سید', 'کوهرنگ', 'روستای تاریخی', 32.6106, 49.8867),
        ('پل_شاپوری_خرم‌آباد', 'خرم‌آباد', 'تاریخی', 33.4719, 48.3542),
        ('آبشار_بیشه', 'دورود', 'طبیعت‌گردی', 33.3325, 48.8789),
        ('منطقه_اورامان', 'مریوان', 'روستای تاریخی', 35.2536, 46.1625),
        ('سنگ_نبشته_اورامان', 'مریوان', 'تاریخی', 35.2536, 46.1625),
        ('روستای_هزاوه', 'اراک', 'روستای تاریخی', 34.1833, 49.5750),
        ('قبرستان_شیخان', 'قم', 'تاریخی', 34.6417, 50.8806),
        ('پارک_جنگلی_نهارخوران_گرگان', 'گرگان', 'طبیعت‌گردی', 36.7869, 54.4636),
        ('کاخ_موزه_گرگان', 'گرگان', 'تاریخی', 36.8406, 54.4369),
        ('مسجد_جامع_سمنان', 'سمنان', 'مذهبی', 35.5728, 53.3969),
        ('عمارت_و_باغ_امیر_سمنان', 'سمنان', 'تاریخی', 35.5728, 53.3969),
        ('آرامگاه_شیخ_احمد_جامی_(تربت_جام)', 'تربت جام', 'مذهبی', 35.2428, 60.6264),
        ('رباط_لاری_(تربت_حیدریه)', 'تربت حیدریه', 'تاریخی', 35.2736, 59.2194),
        ('بازار_قدیم_قم', 'قم', 'بازار', 34.6430, 50.8800),
        ('مدرسه_فیضیه_قم', 'قم', 'مذهبی', 34.6411, 50.8797),
        ('امامزاده_هاشم', 'آمل', 'مذهبی', 35.7944, 52.0533),
        ('امام‌زاده_صالح', 'تهران', 'مذهبی', 35.8047, 51.4339),
        ('بازار_سنندج', 'سنندج', 'بازار', 35.3142, 46.9986),
        ('حمام_شیشه_سنندج', 'سنندج', 'تاریخی', 35.3150, 47.0000),
        ('خانه_دکتر_مصدق', 'احمدآباد', 'تاریخی', 35.9892, 50.4578),
        ('باغ_ملی_تربت_حیدریه', 'تربت حیدریه', 'تفریحی', 35.2778, 59.2222),
        ('آرامگاه_کمال‌الملک_نیشابور', 'نیشابور', 'فرهنگی', 36.2024, 58.8202),
        ('بازار_ماهی‌فروشان_بندرعباس', 'بندرعباس', 'بازار', 27.1833, 56.2750),
        ('قلعه_والی', 'ایلام', 'تاریخی', 33.6375, 46.4250),
        ('معبد_هندوها', 'بندرعباس', 'تاریخی', 27.1869, 56.2778),
        ('پارک_جنگلی_سیسنگان', 'نوشهر', 'طبیعت‌گردی', 36.5658, 51.8153),
    ]

    for title, city, cat, lat, lon in places_data:
        create_place(title, city, cat, lat, lon)


class Migration(migrations.Migration):

    dependencies = [
        ('tourism', '0002_populate_geography'),
    ]

    operations = [
        migrations.RunPython(populate_places),
    ]
